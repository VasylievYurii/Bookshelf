!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var c=Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){n[e]=t},e.parcelRequired7c6=o),o("gGcLX"),o("bNmPK");var r=o("i7mVp"),c=o("4tSb9"),a=o("eJu0s"),i=o("9v0r1"),s=(0,a.useBooksApi)(),l=document.querySelector(".section-categories"),u=document.querySelector(".section-books"),d=document.querySelector(".section-books-title"),f=document.querySelector(".section-books-list");function g(e,t){var n=t?"element-books-list-all":"element-books-list";return e.map(function(e){var t=e.book_image,o=e.title,r=e.author,c=e._id;return'<li class="'.concat(n,"\">\n    <a class='book-item' data-value=\"").concat(c,"\">\n      <div class='thumb'>\n        <img src='").concat(t,"' alt='Book cover' loading=\"lazy\"/>\n        <div class='overlay'>\n          <p class='overlay-text'>quick view </p>\n        </div>\n      </div>\n      <h3 class='book-title'>").concat(o,"</h3>\n      <p class='book-author'>").concat(r,"</p>\n    </a>\n  </li>")}).join("\n")}function p(e){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(e){var t;return(0,c.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.getBooksByCategory(e)];case 1:return t=n.sent(),f.innerHTML=g(t,!0),d.innerHTML=function(e){var t=e.split(" ");if(t.length<2)return"".concat(e);var n=t.pop();return"".concat(t.join(" "),' <span class="accent">').concat(n,"</span>")}(e),function(e){e.classList.add("hidden")}(l),function(e){e.classList.remove("hidden")}(u),f.addEventListener("click",y),[3,3];case 2:return console.log(n.sent()),[3,3];case 3:return[2]}})})).apply(this,arguments)}function y(e){var t=e.target.closest(".book-item");if(t){var n=t.getAttribute("data-value");s.getBookById(n).then(i.insertModalBook).catch(function(e){return console.log(e)}),(0,i.onModalOpen)()}}var r=o("i7mVp"),k=o("aYXpI"),c=o("4tSb9"),a=o("eJu0s"),k=o("aYXpI"),a=o("eJu0s"),m=(0,a.useBooksApi)(),b=document.querySelector(".category-list"),h=function(e){var t=(0,k._)(new Set(e.map(function(e){return e.list_name}))).sort().map(function(e){if(null!=e)return'\n      <li class="category-item list">\n      <a class="category-link link" href="#">'.concat(e,"</a>\n      </li>")}).join("");b.insertAdjacentHTML("beforeend",t),b.querySelector(".link-all").classList.add("active")};function L(){document.querySelectorAll(".category-link").forEach(function(e){e.classList.contains("active")&&e.classList.remove("active")})}m.getCategoryList().then(function(e){h(e)}).catch(function(e){console.log(e)}).finally(function(){}),b.addEventListener("click",function(e){e.preventDefault();var t=e.target.closest(".category-link");if(t){var n=document.querySelector(".link-all"),o=t.textContent.trim();if(L(),"All categories"===o){var r=document.querySelector(".section-categories");document.querySelector(".section-books").classList.add("hidden"),r.classList.remove("hidden"),n.classList.add("active")}else e.target.classList.add("active"),p(o)}});var S=(0,a.useBooksApi)(),q=document.querySelector(".section-categories-list");function _(){return(_=(0,r._)(function(){var e,t,n,o;return(0,c.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,S.getCategoryList()];case 1:return e=r.sent(),t=(0,k._)(new Set(e.map(function(e){return e.list_name}))).sort(),q.innerHTML=t.map(function(e){return"<li class='category-block' data-category=\"".concat(e,"\">\n      <h3 class='category-block-title'>").concat(e,"</h3>\n      <ul class='books-list' data-category=\"").concat(e,"\"></ul>\n      <button type='button' class='btn' >See more</button>\n      </li>")}).join("\n"),n=q.querySelectorAll(".books-list"),[4,S.getTopBooks()];case 2:return o=r.sent(),n.forEach(function(e){var t=e.dataset.category,n=o.find(function(e){return e.list_name===t}).books;e.innerHTML=g(n)}),q.addEventListener("click",y),q.addEventListener("click",A),[3,4];case 3:return console.log(r.sent()),[3,4];case 4:return[2]}})})).apply(this,arguments)}function A(e){if(e.preventDefault(),"BUTTON"===e.target.nodeName){var t=e.target.closest(".category-block").getAttribute("data-category");p(t),L(),Array.from(document.querySelectorAll(".category-link.link")).find(function(e){return e.textContent===t}).classList.add("active");return}}!function(){_.apply(this,arguments)}(),o("bJk49"),o("xpKCW"),o("aISXF"),o("9v0r1"),o("23Ajj"),document.querySelector(".header-link-home").classList.add("current"),o("6GHIx"),o("gTeoF"),o("7hKzD")}();
//# sourceMappingURL=index.a4bd5606.js.map
