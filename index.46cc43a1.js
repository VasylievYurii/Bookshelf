!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},o=t.parcelRequired7c6;null==o&&((o=function(t){if(t in e)return e[t].exports;if(t in n){var o=n[t];delete n[t];var c={id:t,exports:{}};return e[t]=c,o.call(c.exports,c,c.exports),c.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){n[t]=e},t.parcelRequired7c6=o),o("gGcLX"),o("bNmPK");var c=o("i7mVp"),r=o("4tSb9"),a=o("eJu0s"),i=o("9v0r1"),s=(0,a.useBooksApi)(),l=document.querySelector(".section-categories"),u=document.querySelector(".section-books"),d=document.querySelector(".section-books-title"),f=document.querySelector(".section-books-list");function g(t){var e,n=(e=null,document.querySelector(".category-block")?console.log("oneBook if:",e="element-books-list"):console.log("oneBook else:",e="element-books-list-all"),e);return t.map(function(t){var e=t.book_image,o=t.title,c=t.author,r=t._id;return'<li class="'.concat(n,'">\n    <button type="button" class=\'book-item\' data-value="').concat(r,"\">\n      <div class='thumb'>\n        <img src='").concat(e,"' alt='Book cover' />\n        <div class='overlay'>\n          <p class='overlay-text'>quick view </p>\n        </div>\n      </div>\n      <h3 class='book-title'>").concat(o,"</h3>\n      <p class='book-author'>").concat(c,"</p>\n    </button>\n  </li>")}).join("\n")}function p(){return(p=(0,c._)(function(t){var e;return(0,r.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.getBooksByCategory(t)];case 1:return e=n.sent(),f.innerHTML=g(e),d.innerHTML=function(t){var e=t.split(" ");if(e.length<2)return"".concat(t);var n=e.pop();return"".concat(e.join(" "),' <span class="accent">').concat(n,"</span>")}(t),function(t){t.classList.add("hidden")}(l),function(t){t.classList.remove("hidden")}(u),f.addEventListener("click",y),[3,3];case 2:return console.log(n.sent()),[3,3];case 3:return[2]}})})).apply(this,arguments)}function y(t){var e=t.target.closest(".book-item");if(e){var n=e.getAttribute("data-value");s.getBookById(n).then(i.insertModalBook).catch(function(t){return console.log(t)}),(0,i.onModalOpen)()}}var c=o("i7mVp"),v=o("aYXpI"),r=o("4tSb9"),a=o("eJu0s"),k=(0,a.useBooksApi)(),b=document.querySelector(".section-categories-list");function m(){return h.apply(this,arguments)}function h(){return(h=(0,c._)(function(){var t,e,n,o;return(0,r.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,k.getCategoryList()];case 1:return t=c.sent(),e=(0,v._)(new Set(t.map(function(t){return t.list_name}))).sort(),b.innerHTML=e.map(function(t){return"<li class='category-block' data-category=\"".concat(t,"\">\n      <h3 class='category-block-title'>").concat(t,"</h3>\n      <ul class='books-list' data-category=\"").concat(t,"\"></ul>\n      <button type='button' class='btn' >See more</button>\n      </li>")}).join("\n"),n=b.querySelectorAll(".books-list"),[4,k.getTopBooks()];case 2:return o=c.sent(),n.forEach(function(t){var e=t.dataset.category,n=o.find(function(t){return t.list_name===e}).books;t.innerHTML=g(n)}),b.addEventListener("click",y),b.addEventListener("click",L),[3,4];case 3:return console.log(c.sent()),[3,4];case 4:return[2]}})})).apply(this,arguments)}function L(t){if(console.log("function onButtonClick:",t),console.log("evt.target.nodeName",t.target.nodeName),"BUTTON"===t.target.nodeName){console.log("evt.target",t.target);var e=t.target.closest(".category-block").getAttribute("data-category");console.log("category",e),function(t){p.apply(this,arguments)}(e);return}console.log("function onButtonClick return")}m();var v=o("aYXpI"),a=o("eJu0s"),S=(0,a.useBooksApi)(),B=document.querySelector(".category-list"),_=document.querySelector(".category-link"),q=document.querySelectorAll(".category-link"),E=function(t){var e=(0,v._)(new Set(t.map(function(t){return t.list_name}))).sort().map(function(t){if(null!=t)return'<li class="category-item list"><a class="category-link link" href="">'.concat(t,"</a></li>")}).join("");B.insertAdjacentHTML("beforeend",e),q.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),q.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active")})})};_.addEventListener("click",function(){m()}),S.getCategoryList().then(function(t){E(t)}).catch(function(t){console.log(t)}).finally(function(){}),o("jjftE"),o("xpKCW"),o("aISXF"),o("9v0r1"),o("23Ajj"),o("7hKzD")}();
//# sourceMappingURL=index.46cc43a1.js.map
