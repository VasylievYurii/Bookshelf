{"mappings":"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","sources":["<anon>","src/index.js","src/js/render-books-by-category.js","src/js/condition-for-categories-render.js","src/js/top-books.js","src/js/fetch-categories.js","src/js/get-current-for-home-page.js"],"sourcesContent":["var $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired7c6\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired7c6\"] = parcelRequire;\n}\n// import switcher from './switcher';\nparcelRequire(\"2wbaf\");\nparcelRequire(\"4dIBK\");\n\nvar $d5eID = parcelRequire(\"d5eID\");\n\nvar $fMzCF = parcelRequire(\"fMzCF\");\nfunction $3af0a9fa5e15deee$export$c522a0db91e5ddc6(e) {\n    let oneBook = null;\n    if (!e) oneBook = \"element-books-list\";\n    else oneBook = \"element-books-list-all\";\n    return oneBook;\n}\n\n\nconst $7a19ac8647e594da$var$booksApi = (0, $d5eID.useBooksApi)();\nconst $7a19ac8647e594da$var$sectionCategoriesEl = document.querySelector(\".section-categories\");\nconst $7a19ac8647e594da$var$sectionBooksEl = document.querySelector(\".section-books\");\nconst $7a19ac8647e594da$var$sectionBooksTitleEl = document.querySelector(\".section-books-title\");\nconst $7a19ac8647e594da$var$booksListEl = document.querySelector(\".section-books-list\");\nfunction $7a19ac8647e594da$export$c2ff2758ce23ccbb(books, e) {\n    let oneBook = (0, $3af0a9fa5e15deee$export$c522a0db91e5ddc6)(e);\n    const markup = books.map(({ book_image: book_image, title: title, author: author, _id: _id })=>`<li class=\"${oneBook}\">\n    <a class='book-item' data-value=\"${_id}\">\n      <div class='thumb'>\n        <img src='${book_image}' alt='Book cover' loading=\"lazy\"/>\n        <div class='overlay'>\n          <p class='overlay-text'>quick view </p>\n        </div>\n      </div>\n      <h3 class='book-title'>${title}</h3>\n      <p class='book-author'>${author}</p>\n    </a>\n  </li>`).join(\"\\n\");\n    return markup;\n}\nfunction $7a19ac8647e594da$var$makeMarkupForTitle(title) {\n    const arrFromTitle = title.split(\" \");\n    if (arrFromTitle.length < 2) return `${title}`;\n    const lastWord = arrFromTitle.pop();\n    return `${arrFromTitle.join(\" \")} <span class=\"accent\">${lastWord}</span>`;\n}\nasync function $7a19ac8647e594da$export$e3a458789c8a5044(category) {\n    try {\n        const res = await $7a19ac8647e594da$var$booksApi.getBooksByCategory(category);\n        $7a19ac8647e594da$var$booksListEl.innerHTML = $7a19ac8647e594da$export$c2ff2758ce23ccbb(res, true);\n        $7a19ac8647e594da$var$sectionBooksTitleEl.innerHTML = $7a19ac8647e594da$var$makeMarkupForTitle(category);\n        $7a19ac8647e594da$var$hideElement($7a19ac8647e594da$var$sectionCategoriesEl);\n        $7a19ac8647e594da$var$showElement($7a19ac8647e594da$var$sectionBooksEl);\n        $7a19ac8647e594da$var$booksListEl.addEventListener(\"click\", $7a19ac8647e594da$export$2e63ecab0dc5da99);\n    } catch (err) {\n        console.log(err);\n    }\n}\nfunction $7a19ac8647e594da$export$2e63ecab0dc5da99(evt) {\n    const bookItem = evt.target.closest(\".book-item\");\n    if (!bookItem) return;\n    const bookId = bookItem.getAttribute(\"data-value\");\n    $7a19ac8647e594da$var$booksApi.getBookById(bookId).then((0, $fMzCF.insertModalBook)).catch((error)=>console.log(error));\n    (0, $fMzCF.onModalOpen)();\n}\nfunction $7a19ac8647e594da$var$hideElement(elem) {\n    elem.classList.add(\"hidden\");\n}\nfunction $7a19ac8647e594da$var$showElement(elem) {\n    elem.classList.remove(\"hidden\");\n}\n\n\n\nvar $d5eID = parcelRequire(\"d5eID\");\n\n\nvar $d5eID = parcelRequire(\"d5eID\");\n\nconst $613bb2bcc396c396$var$booksApi = (0, $d5eID.useBooksApi)();\nconst $613bb2bcc396c396$var$handleOnPress = (e)=>{\n    $613bb2bcc396c396$var$booksApi.getCategoryList().then((res)=>{\n        $613bb2bcc396c396$var$parseCategoryList(res);\n    }).catch((err)=>{\n        console.log(err);\n    }).finally(()=>{});\n};\nconst $613bb2bcc396c396$var$categoryListEl = document.querySelector(\".category-list\");\nconst $613bb2bcc396c396$var$parseCategoryList = (list)=>{\n    const uniqueCategories = [\n        ...new Set(list.map(({ list_name: list_name })=>list_name))\n    ].sort();\n    const categoryList = uniqueCategories.map((category)=>{\n        if (category !== null && category !== undefined) return `\n      <li class=\"category-item list\">\n      <a class=\"category-link link\" href=\"#\">${category}</a>\n      </li>`;\n    }).join(\"\");\n    $613bb2bcc396c396$var$categoryListEl.insertAdjacentHTML(\"beforeend\", categoryList);\n    let activeCategory = $613bb2bcc396c396$var$categoryListEl.querySelector(\".link-all\");\n    activeCategory.classList.add(\"active\");\n};\n$613bb2bcc396c396$var$handleOnPress();\n$613bb2bcc396c396$var$categoryListEl.addEventListener(\"click\", $613bb2bcc396c396$var$getBookFromCategory);\nfunction $613bb2bcc396c396$var$getBookFromCategory(e) {\n    e.preventDefault();\n    const targetCategory = e.target.closest(\".category-link\");\n    if (!targetCategory) return;\n    const linkAllRef = document.querySelector(\".link-all\");\n    const text = targetCategory.textContent.trim();\n    $613bb2bcc396c396$export$281d5932efad96db();\n    if (text === \"All categories\") {\n        const sectionCategoriesRef = document.querySelector(\".section-categories\");\n        const sectionBooksRef = document.querySelector(\".section-books\");\n        sectionBooksRef.classList.add(\"hidden\");\n        sectionCategoriesRef.classList.remove(\"hidden\");\n        linkAllRef.classList.add(\"active\");\n    } else {\n        let activeCategory = e.target;\n        activeCategory.classList.add(\"active\");\n        (0, $7a19ac8647e594da$export$e3a458789c8a5044)(text);\n    }\n}\nfunction $613bb2bcc396c396$export$281d5932efad96db() {\n    const allCategories = document.querySelectorAll(\".category-link\");\n    allCategories.forEach(function(element) {\n        if (element.classList.contains(\"active\")) element.classList.remove(\"active\");\n    });\n}\n\n\nconst $874e917b2764b2ca$var$booksApi = (0, $d5eID.useBooksApi)();\nconst $874e917b2764b2ca$var$sectionCategoriesListEl = document.querySelector(\".section-categories-list\");\nfunction $874e917b2764b2ca$var$makeMarkupForCategories(categories) {\n    const categoriesMarkup = categories.map((list_name)=>`<li class='category-block' data-category=\"${list_name}\">\n      <h3 class='category-block-title'>${list_name}</h3>\n      <ul class='books-list' data-category=\"${list_name}\"></ul>\n      <button type='button' class='btn' >See more</button>\n      </li>`).join(\"\\n\");\n    return categoriesMarkup;\n}\nasync function $874e917b2764b2ca$export$575704ffafa2b714() {\n    try {\n        const categories = await $874e917b2764b2ca$var$booksApi.getCategoryList();\n        const uniqueCategories = [\n            ...new Set(categories.map(({ list_name: list_name })=>list_name))\n        ].sort();\n        $874e917b2764b2ca$var$sectionCategoriesListEl.innerHTML = $874e917b2764b2ca$var$makeMarkupForCategories(uniqueCategories);\n        const blocksForRenderingBooks = $874e917b2764b2ca$var$sectionCategoriesListEl.querySelectorAll(\".books-list\");\n        const topBooks = await $874e917b2764b2ca$var$booksApi.getTopBooks();\n        blocksForRenderingBooks.forEach((block)=>{\n            const categoryName = block.dataset.category;\n            const topBooksOfCategory = topBooks.find((elem)=>elem.list_name === categoryName).books;\n            block.innerHTML = (0, $7a19ac8647e594da$export$c2ff2758ce23ccbb)(topBooksOfCategory);\n        });\n        $874e917b2764b2ca$var$sectionCategoriesListEl.addEventListener(\"click\", (0, $7a19ac8647e594da$export$2e63ecab0dc5da99));\n        $874e917b2764b2ca$var$sectionCategoriesListEl.addEventListener(\"click\", $874e917b2764b2ca$var$onButtonClick);\n    } catch (err) {\n        console.log(err);\n    }\n}\nfunction $874e917b2764b2ca$var$onButtonClick(evt) {\n    evt.preventDefault();\n    if (evt.target.nodeName === \"BUTTON\") {\n        const category = evt.target.closest(\".category-block\").getAttribute(\"data-category\");\n        (0, $7a19ac8647e594da$export$e3a458789c8a5044)(category);\n        (0, $613bb2bcc396c396$export$281d5932efad96db)();\n        const allCategories = Array.from(document.querySelectorAll(\".category-link.link\"));\n        const activeCategoryEl = allCategories.find((elem)=>elem.textContent === category);\n        activeCategoryEl.classList.add(\"active\");\n        return;\n    }\n}\n$874e917b2764b2ca$export$575704ffafa2b714();\n\n\n\n\nparcelRequire(\"ld1e2\");\nparcelRequire(\"dTazW\");\nparcelRequire(\"4EhXu\");\nparcelRequire(\"fMzCF\");\nparcelRequire(\"74Aiq\");\nparcelRequire(\"epHO8\");\nconst $e37ee52f6432a5a2$var$currentHomePage = document.querySelector(\".header-link-home\");\n$e37ee52f6432a5a2$var$currentHomePage.classList.add(\"current\");\n\n\n\n\n//# sourceMappingURL=index.40539960.js.map\n","// import switcher from './switcher';\nimport './js/themes';\nimport './js/menu';\nimport './js/render-books-by-category';\nimport './js/top-books';\nimport './js/condition-for-categories-render';\nimport './js/fetch-categories';\nimport './js/fireBaseFnunctions.js';\nimport './js/support';\nimport './js/auth/modal-auth/eventsProcessor';\nimport './js/pop-up-book';\nimport './js/scroll-up';\nimport './js/footer';\nimport './js/get-current-for-home-page';","import { useBooksApi } from '../services/booksApi';\nimport { insertModalBook, onModalOpen } from './pop-up-book';\nimport { addClassForBookList } from './condition-for-categories-render';\n\nconst booksApi = useBooksApi();\n\nconst sectionCategoriesEl = document.querySelector('.section-categories');\nconst sectionBooksEl = document.querySelector('.section-books');\nconst sectionBooksTitleEl = document.querySelector('.section-books-title');\nconst booksListEl = document.querySelector('.section-books-list');\n\nfunction makeMarkupForBooks(books, e) {\n  let oneBook = addClassForBookList(e);\n  const markup = books\n    .map(\n      ({ book_image, title, author, _id }) => `<li class=\"${oneBook}\">\n    <a class='book-item' data-value=\"${_id}\">\n      <div class='thumb'>\n        <img src='${book_image}' alt='Book cover' loading=\"lazy\"/>\n        <div class='overlay'>\n          <p class='overlay-text'>quick view </p>\n        </div>\n      </div>\n      <h3 class='book-title'>${title}</h3>\n      <p class='book-author'>${author}</p>\n    </a>\n  </li>`\n    )\n    .join('\\n');\n  return markup;\n}\n\nfunction makeMarkupForTitle(title) {\n  const arrFromTitle = title.split(' ');\n  if (arrFromTitle.length < 2) {\n    return `${title}`;\n  }\n  const lastWord = arrFromTitle.pop();\n  return `${arrFromTitle.join(' ')} <span class=\"accent\">${lastWord}</span>`;\n}\n\nasync function renderBooksByCategory(category) {\n  try {\n    const res = await booksApi.getBooksByCategory(category);\n    booksListEl.innerHTML = makeMarkupForBooks(res, true);\n    sectionBooksTitleEl.innerHTML = makeMarkupForTitle(category);\n    hideElement(sectionCategoriesEl);\n    showElement(sectionBooksEl);\n    booksListEl.addEventListener('click', onBookSelect);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction onBookSelect(evt) {\n  const bookItem = evt.target.closest('.book-item');\n  if (!bookItem) {\n    return;\n  }\n  const bookId = bookItem.getAttribute('data-value');\n  booksApi\n    .getBookById(bookId)\n    .then(insertModalBook)\n    .catch(error => console.log(error));\n  onModalOpen();\n}\n\nfunction hideElement(elem) {\n  elem.classList.add('hidden');\n}\n\nfunction showElement(elem) {\n  elem.classList.remove('hidden');\n}\n\nexport { makeMarkupForBooks, renderBooksByCategory, onBookSelect };\n","function addClassForBookList(e) {\n  let oneBook = null;\n  if (!e) {\n    oneBook = 'element-books-list';\n  } else {\n    oneBook = 'element-books-list-all';\n  }\n  return oneBook;\n}\n\nexport { addClassForBookList };\n","import { useBooksApi } from '../services/booksApi';\nimport {\n  makeMarkupForBooks,\n  renderBooksByCategory,\n  onBookSelect,\n} from './render-books-by-category';\nimport { clearStyleCategories } from './fetch-categories';\n\nconst booksApi = useBooksApi();\n\nconst sectionCategoriesListEl = document.querySelector(\n  '.section-categories-list'\n);\n\nfunction makeMarkupForCategories(categories) {\n  const categoriesMarkup = categories\n    .map(\n      list_name => `<li class='category-block' data-category=\"${list_name}\">\n      <h3 class='category-block-title'>${list_name}</h3>\n      <ul class='books-list' data-category=\"${list_name}\"></ul>\n      <button type='button' class='btn' >See more</button>\n      </li>`\n    )\n    .join('\\n');\n  return categoriesMarkup;\n}\n\nasync function parceCategoriesBlocks() {\n  try {\n    const categories = await booksApi.getCategoryList();\n    const uniqueCategories = [\n      ...new Set(categories.map(({ list_name }) => list_name)),\n    ].sort();\n    sectionCategoriesListEl.innerHTML =\n      makeMarkupForCategories(uniqueCategories);\n    const blocksForRenderingBooks =\n      sectionCategoriesListEl.querySelectorAll('.books-list');\n    const topBooks = await booksApi.getTopBooks();\n    blocksForRenderingBooks.forEach(block => {\n      const categoryName = block.dataset.category;\n      const topBooksOfCategory = topBooks.find(\n        elem => elem.list_name === categoryName\n      ).books;\n      block.innerHTML = makeMarkupForBooks(topBooksOfCategory);\n    });\n    sectionCategoriesListEl.addEventListener('click', onBookSelect);\n    sectionCategoriesListEl.addEventListener('click', onButtonClick);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction onButtonClick(evt) {\n  evt.preventDefault();\n\n  if (evt.target.nodeName === 'BUTTON') {\n    const category = evt.target\n      .closest('.category-block')\n      .getAttribute('data-category');\n    renderBooksByCategory(category);\n    clearStyleCategories();\n    const allCategories = Array.from(\n      document.querySelectorAll('.category-link.link')\n    );\n    const activeCategoryEl = allCategories.find(\n      elem => elem.textContent === category\n    );\n    activeCategoryEl.classList.add('active');\n    return;\n  }\n}\n\nparceCategoriesBlocks();\n\nexport { parceCategoriesBlocks };\n","import { useBooksApi } from '../services/booksApi';\nimport { renderBooksByCategory } from './render-books-by-category';\n\nconst booksApi = useBooksApi();\n\nconst handleOnPress = e => {\n  booksApi\n    .getCategoryList()\n    .then(res => {\n      parseCategoryList(res);\n    })\n    .catch(err => {\n      console.log(err);\n    })\n    .finally(() => {});\n};\nconst categoryListEl = document.querySelector('.category-list');\n\nconst parseCategoryList = list => {\n  const uniqueCategories = [\n    ...new Set(list.map(({ list_name }) => list_name)),\n  ].sort();\n  const categoryList = uniqueCategories\n    .map(category => {\n      if (category !== null && category !== undefined) {\n        return `\n      <li class=\"category-item list\">\n      <a class=\"category-link link\" href=\"#\">${category}</a>\n      </li>`;\n      }\n    })\n    .join('');\n  categoryListEl.insertAdjacentHTML('beforeend', categoryList);\n  let activeCategory = categoryListEl.querySelector('.link-all');\n  activeCategory.classList.add('active');\n};\n\nhandleOnPress();\n\ncategoryListEl.addEventListener('click', getBookFromCategory);\n\nfunction getBookFromCategory(e) {\n  e.preventDefault();\n  const targetCategory = e.target.closest('.category-link');\n  if (!targetCategory) {\n    return;\n  }\n  const linkAllRef = document.querySelector('.link-all');\n  const text = targetCategory.textContent.trim();\n  clearStyleCategories();\n  if (text === 'All categories') {\n    const sectionCategoriesRef = document.querySelector('.section-categories');\n    const sectionBooksRef = document.querySelector('.section-books');\n    sectionBooksRef.classList.add('hidden');\n    sectionCategoriesRef.classList.remove('hidden');\n    linkAllRef.classList.add('active');\n  } else {\n    let activeCategory = e.target;\n    activeCategory.classList.add('active');\n    renderBooksByCategory(text);\n  }\n}\n\nfunction clearStyleCategories() {\n  const allCategories = document.querySelectorAll('.category-link');\n  allCategories.forEach(function (element) {\n    if (element.classList.contains('active')) {\n      element.classList.remove('active');\n    }\n  });\n}\n\nexport { clearStyleCategories };\n","const currentHomePage = document.querySelector('.header-link-home');\n\ncurrentHomePage.classList.add('current');"],"names":["$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$d5eID","$fMzCF","$7a19ac8647e594da$var$booksApi","useBooksApi","$7a19ac8647e594da$var$sectionCategoriesEl","document","querySelector","$7a19ac8647e594da$var$sectionBooksEl","$7a19ac8647e594da$var$sectionBooksTitleEl","$7a19ac8647e594da$var$booksListEl","$7a19ac8647e594da$export$c2ff2758ce23ccbb","books","e","oneBook","markup","map","book_image","title","author","_id","join","$7a19ac8647e594da$export$e3a458789c8a5044","category","res","getBooksByCategory","innerHTML","$7a19ac8647e594da$var$makeMarkupForTitle","arrFromTitle","split","length","lastWord","pop","$7a19ac8647e594da$var$hideElement","elem","classList","add","$7a19ac8647e594da$var$showElement","remove","addEventListener","$7a19ac8647e594da$export$2e63ecab0dc5da99","console","log","evt","bookItem","target","closest","bookId","getAttribute","getBookById","then","insertModalBook","catch","error","onModalOpen","$613bb2bcc396c396$var$booksApi","$613bb2bcc396c396$var$categoryListEl","$613bb2bcc396c396$var$parseCategoryList","list","uniqueCategories","Set","list_name","sort","categoryList","insertAdjacentHTML","activeCategory","$613bb2bcc396c396$export$281d5932efad96db","allCategories","querySelectorAll","forEach","element","contains","getCategoryList","finally","preventDefault","targetCategory","linkAllRef","text","textContent","trim","sectionCategoriesRef","sectionBooksRef","$874e917b2764b2ca$var$booksApi","$874e917b2764b2ca$var$sectionCategoriesListEl","$874e917b2764b2ca$var$onButtonClick","nodeName","Array","from","activeCategoryEl","find","$874e917b2764b2ca$export$575704ffafa2b714","categories","$874e917b2764b2ca$var$makeMarkupForCategories","categoriesMarkup","blocksForRenderingBooks","topBooks","getTopBooks","block","categoryName","dataset","topBooksOfCategory","$e37ee52f6432a5a2$var$currentHomePage"],"version":3,"file":"index.40539960.js.map"}