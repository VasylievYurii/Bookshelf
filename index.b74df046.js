!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var c={id:e,exports:{}};return t[e]=c,n.call(c.exports,c,c.exports),c.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},e.parcelRequired7c6=n),n("gGcLX"),n("bNmPK");var c=n("i7mVp"),r=n("4tSb9"),a=n("eJu0s"),l=n("9v0r1"),s=(0,a.useBooksApi)(),i=document.querySelector(".section-categories"),u=document.querySelector(".section-books"),d=document.querySelector(".section-books-title"),f=document.querySelector(".section-books-list");function g(e,t){var o,n=(o=null,t?(console.log("second document.querySelector(.category-block)",document.querySelector(".category-block")),console.log("oneBook else:",o="element-books-list-all")):(console.log("first document.querySelector(.category-block)",document.querySelector(".category-block")),console.log("oneBook if:",o="element-books-list")),o);return e.map(function(e){var t=e.book_image,o=e.title,c=e.author,r=e._id;return'<li class="'.concat(n,"\">\n    <a class='book-item' data-value=\"").concat(r,"\">\n      <div class='thumb'>\n        <img src='").concat(t,"' alt='Book cover' />\n        <div class='overlay'>\n          <p class='overlay-text'>quick view </p>\n        </div>\n      </div>\n      <h3 class='book-title'>").concat(o,"</h3>\n      <p class='book-author'>").concat(c,"</p>\n    </a>\n  </li>")}).join("\n")}function y(){return(y=(0,c._)(function(e){var t;return(0,r.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,s.getBooksByCategory(e)];case 1:return t=o.sent(),f.innerHTML=g(t,!0),d.innerHTML=function(e){var t=e.split(" ");if(t.length<2)return"".concat(e);var o=t.pop();return"".concat(t.join(" "),' <span class="accent">').concat(o,"</span>")}(e),console.log("elem add class:",i),i.classList.add("hidden"),console.log("elem hide class:",u),u.classList.remove("hidden"),f.addEventListener("click",p),[3,3];case 2:return console.log(o.sent()),[3,3];case 3:return[2]}})})).apply(this,arguments)}function p(e){var t=e.target.closest(".book-item");if(t){var o=t.getAttribute("data-value");s.getBookById(o).then(l.insertModalBook).catch(function(e){return console.log(e)}),(0,l.onModalOpen)()}}var c=n("i7mVp"),v=n("aYXpI"),r=n("4tSb9"),a=n("eJu0s"),k=(0,a.useBooksApi)(),m=document.querySelector(".section-categories-list");function b(){return h.apply(this,arguments)}function h(){return(h=(0,c._)(function(){var e,t,o,n;return(0,r.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,k.getCategoryList()];case 1:return e=c.sent(),t=(0,v._)(new Set(e.map(function(e){return e.list_name}))).sort(),m.innerHTML=t.map(function(e){return"<li class='category-block' data-category=\"".concat(e,"\">\n      <h3 class='category-block-title'>").concat(e,"</h3>\n      <ul class='books-list' data-category=\"").concat(e,"\"></ul>\n      <button type='button' class='btn' >See more</button>\n      </li>")}).join("\n"),o=m.querySelectorAll(".books-list"),[4,k.getTopBooks()];case 2:return n=c.sent(),o.forEach(function(e){var t=e.dataset.category,o=n.find(function(e){return e.list_name===t}).books;e.innerHTML=g(o)}),m.addEventListener("click",p),m.addEventListener("click",S),[3,4];case 3:return console.log(c.sent()),[3,4];case 4:return[2]}})})).apply(this,arguments)}function S(e){if(e.preventDefault(),console.log("function onButtonClick:",e),console.log("evt.target.nodeName",e.target.nodeName),"BUTTON"===e.target.nodeName){console.log("evt.target",e.target);var t=e.target.closest(".category-block").getAttribute("data-category");console.log("category",t),function(e){y.apply(this,arguments)}(t);return}console.log("function onButtonClick return")}b();var v=n("aYXpI"),a=n("eJu0s"),L=(0,a.useBooksApi)(),q=document.querySelector(".category-list"),B=document.querySelector(".category-link"),_=document.querySelectorAll(".category-link"),E=function(e){var t=(0,v._)(new Set(e.map(function(e){return e.list_name}))).sort().map(function(e){if(null!=e)return'<li class="category-item list"><a class="category-link link" href="">'.concat(e,"</a></li>")}).join("");q.insertAdjacentHTML("beforeend",t),_.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),_.forEach(function(e){return e.classList.remove("active")}),e.classList.add("active")})})};B.addEventListener("click",function(){b()}),L.getCategoryList().then(function(e){E(e)}).catch(function(e){console.log(e)}).finally(function(){}),n("jjftE"),n("xpKCW"),n("aISXF"),n("9v0r1"),n("23Ajj"),n("7hKzD")}();
//# sourceMappingURL=index.b74df046.js.map
