{"mappings":"C,A,W,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,S,E,S,I,E,E,S,E,E,S,E,E,S,E,E,SEIM,EAAW,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,IAEX,EAAsB,SAAS,aAAA,CAAc,uBAC7C,EAAiB,SAAS,aAAA,CAAc,kBACxC,EAAsB,SAAS,aAAA,CAAc,wBAC7C,EAAc,SAAS,aAAA,CAAc,uBAE3C,SAAS,EAAmB,CAAK,CAAE,CAAC,EAClC,IAAI,EAA8B,ECPtB,yBAFA,qBD0BZ,OAhBe,EACZ,GAAA,CACC,SAFJ,CAAA,EAEO,IAAA,EAAA,EAAA,UAAA,CAAY,EAAA,EAAA,KAAA,CAAO,EAAA,EAAA,MAAA,CAAQ,EAAA,EAAA,GAA3B,CAAqC,MAAC,cACR,MAAA,CADqB,EAAQ,+CAGhD,MAAA,CAFmB,EAAI,sDAOZ,MAAA,CALX,EAAW,wLAMA,MAAA,CADA,EAAM,wCACC,MAAA,CAAP,EAAO,0BAIjC,GAAA,IAAA,CAAK,KAEV,CAWe,SAAA,EAAsB,CAAQ,EAA9B,OAAA,EAAA,KAAA,CAAA,IAAA,CAAA,U,CAAA,SAAA,IAAA,MAAA,AAAA,CAAA,EAAf,AAAA,CAAA,EAAA,EAAA,CAAA,AAAA,EAAA,SAAqC,CAAQ,EAEnC,IAAA,E,M,A,C,E,E,W,A,E,I,C,S,C,E,O,E,K,E,K,EAAM,O,E,I,C,I,C,C,E,G,E,EAAA,C,EAAM,EAAS,kBAAA,CAAmB,G,A,M,E,OAAxC,EAAM,EAAN,IAAA,GACN,EAAY,SAAA,CAAY,EAAmB,EAAK,CAAA,GAChD,EAAoB,SAAA,CAAY,AAbpC,SAA4B,CAAK,EAC/B,IAAM,EAAe,EAAM,KAAA,CAAM,KACjC,GAAI,EAAa,MAAA,CAAS,EACxB,MAAQ,GAAQ,MAAA,CAAN,GAEZ,IAAM,EAAW,EAAa,GAA9B,GACA,MAAQ,GAAiD,MAAA,CAA/C,EAAa,IAAA,CAAK,KAAK,0BAAiC,MAAA,CAAT,EAAS,UACpE,EAMuD,GACnD,AAqBJ,SAAqB,CAAI,EACvB,EAAK,SAAA,CAAU,GAAA,CAAI,SACrB,EAvBgB,GACZ,AAwBJ,SAAqB,CAAI,EACvB,EAAK,SAAA,CAAU,MAAA,CAAO,SACxB,EA1BgB,GACZ,EAAY,gBAAA,CAAiB,QAAS,G,C,E,E,A,M,E,OAEtC,QAAQ,GAAA,CADD,EAAA,IAAA,I,C,E,E,A,M,E,M,C,E,A,C,EAGX,EAAA,EAXe,KAAA,CAAA,IAAA,CAAA,U,CAaf,SAAS,EAAa,CAAG,EACvB,IAAM,EAAW,EAAI,MAAA,CAAO,OAAA,CAAQ,cACpC,GAAK,GAGL,IAAM,EAAS,EAAS,YAAA,CAAa,cACrC,EACG,WAAA,CAAY,GACZ,IAAA,CAAK,EAAA,eAAc,EACnB,KAAA,CAAM,SAAA,CAHT,EAGkB,OAAA,QAAQ,GAAA,CAAI,E,GAC9B,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,IACF,C,I,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,E,SG9DM,EAAW,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,IAaX,EAAiB,SAAS,aAAA,CAAc,kBAExC,EAAoB,SAAA,CAA1B,EAIE,IAAM,EAAe,AAHI,AACvB,CAAA,EAAA,EAAA,CAAA,AAAA,EAAG,IAAI,IAAI,EAAK,GAAA,CAAI,SADtB,CAAA,EACyC,OAAhB,EAAA,SAAA,AACvB,KAAA,IAAA,GAEC,GAAA,CAAI,SAAA,CADP,EAEI,GAAI,MAAA,EACF,MAAQ,yFAEwC,MAAA,CAAT,EAAS,oBAGpD,GACC,IAAA,CAAK,IACR,EAAe,kBAAA,CAAmB,YAAa,GAE/C,AADqB,EAAe,aAAA,CAAc,aACnC,SAAA,CAAU,GAAA,CAAI,SAC/B,EA4BA,SAAS,IAEP,AADsB,SAAS,gBAAA,CAAiB,kBAClC,OAAA,CAAQ,SAAU,CAAO,EACjC,EAAQ,SAAA,CAAU,QAAA,CAAS,WAC7B,EAAQ,SAAA,CAAU,MAAA,CAAO,SAE7B,EACF,CAhEE,EACG,eAAA,GACA,IAAA,CAAK,SAAA,CAFR,EAGI,EAAkB,EACpB,GACC,KAAA,CAAM,SAAA,CADP,EAEE,QAAQ,GAAA,CAAI,EACd,GACC,OAAA,CAAQ,WAAO,GAyBpB,EAAe,gBAAA,CAAiB,QAEhC,SAA6B,CAAC,EAC5B,EAAE,cAAF,GACA,IAAM,EAAiB,EAAE,MAAA,CAAO,OAAA,CAAQ,kBACxC,GAAK,GAGL,IAAM,EAAa,SAAS,aAAA,CAAc,aACpC,EAAO,EAAe,WAAA,CAAY,IAAxC,GAEA,GADA,IACI,AAAS,mBAAT,EAA2B,CAC7B,IAAM,EAAuB,SAAS,aAAA,CAAc,uBAEpD,AADwB,SAAS,aAAA,CAAc,kBAC/B,SAAA,CAAU,GAAA,CAAI,UAC9B,EAAqB,SAAA,CAAU,MAAA,CAAO,UACtC,EAAW,SAAA,CAAU,GAAA,CAAI,SAC3B,MAEE,AADqB,EAAE,MAAvB,CACe,SAAA,CAAU,GAAA,CAAI,UAC7B,AAAA,EAAsB,GAE1B,GDrDA,IAAM,EAAW,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,IAEX,EAA0B,SAAS,aAAA,CACvC,4BAgBa,SAAA,IAAA,MAAA,AAAA,CAAA,EAAf,AAAA,CAAA,EAAA,EAAA,CAAA,AAAA,EAAA,WAEU,IAAA,EACA,EAKA,EAEA,E,M,A,C,E,E,W,A,E,I,C,S,C,E,O,E,K,E,K,EARa,O,E,I,C,I,C,C,E,G,E,EAAA,C,EAAM,EAAS,eAAT,G,A,M,EAQR,OARX,EAAa,EAAb,IAAA,GACA,EACJ,AAAA,CAAA,EAAA,EAAA,CAAA,AAAA,EAAG,IAAI,IAAI,EAAW,GAAA,CAAI,SADtB,CAAA,EACyC,OAAhB,EAAA,SAAA,AAC7B,KAAA,IAAA,GACF,EAAwB,SAAA,CAlBD,AAmBG,EAlBzB,GAAA,CACC,SAAA,CAFJ,EAEiB,MAAC,8CACqB,MAAA,CADuB,EAAU,gDAE5B,MAAA,CADL,EAAU,wDACK,MAAA,CAAV,EAAU,oFAInD,GAAA,IAAA,CAAK,MAYA,EACJ,EAAwB,gBAAA,CAAiB,eAC1B,C,EAAM,EAAS,WAAT,G,A,M,E,OAAjB,EAAW,EAAX,IAAA,GACN,EAAwB,OAAA,CAAQ,SAAA,CAAhC,EACE,IAAM,EAAe,EAAM,OAAA,CAAQ,QAAnC,CACM,EAAqB,EAAS,IAAA,CAClC,SAAA,CADF,EACU,OAAA,EAAK,SAAA,GAAc,CAC3B,GAAA,KAAA,AACF,CAAA,EAAM,SAAA,CAAY,AAAA,EAAmB,EACvC,GACA,EAAwB,gBAAA,CAAiB,QAAS,GAClD,EAAwB,gBAAA,CAAiB,QAAS,G,C,E,E,A,M,E,OAElD,QAAQ,GAAA,CADD,EAAA,IAAA,I,C,E,E,A,M,E,M,C,E,A,C,EAGX,EAAA,EAvBe,KAAA,CAAA,IAAA,CAAA,U,CAyBf,SAAS,EAAc,CAAG,EAGxB,GAFA,EAAI,cAAJ,GAEI,AAAwB,WAAxB,EAAI,MAAA,CAAO,QAAA,CAAuB,CACpC,IAAM,EAAW,EAAI,MAAA,CAClB,OAAA,CAAQ,mBACR,YAAA,CAAa,iBAChB,AAAA,EAAsB,GACtB,AAAA,IAOA,AAHyB,AAHH,MAAM,IAAA,CAC1B,SAAS,gBAAA,CAAiB,wBAEW,IAAA,CACrC,SAAA,CADF,EACU,OAAA,EAAK,WAAA,GAAgB,C,GAEd,SAAA,CAAU,GAAA,CAAI,UAC/B,MACF,CACF,EAEA,AA7Ce,WAAA,EAAA,KAAA,CAAA,IAAA,CAAA,U,I,E,S,E,S,E,S,E,S,E,SEzBf,AAFwB,SAAS,aAAA,CAAc,qBAE/B,SAAA,CAAU,GAAA,CAAI,W,E,S,E,S,E,Q","sources":["<anon>","src/index.js","src/js/render-books-by-category.js","src/js/condition-for-categories-render.js","src/js/top-books.js","src/js/fetch-categories.js","src/js/get-current-for-home-page.js"],"sourcesContent":["(function () {\nvar $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequired7c6\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequired7c6\"] = parcelRequire;\n}\n// import switcher from './switcher';\nparcelRequire(\"gGcLX\");\nparcelRequire(\"bNmPK\");\n\nvar $i7mVp = parcelRequire(\"i7mVp\");\n\nvar $4tSb9 = parcelRequire(\"4tSb9\");\n\nvar $eJu0s = parcelRequire(\"eJu0s\");\n\nvar $9v0r1 = parcelRequire(\"9v0r1\");\nfunction $a9593882249300d7$export$c522a0db91e5ddc6(e) {\n    var oneBook = null;\n    if (!e) oneBook = \"element-books-list\";\n    else oneBook = \"element-books-list-all\";\n    return oneBook;\n}\n\n\nvar $8c77ecf650b6eefd$var$booksApi = (0, $eJu0s.useBooksApi)();\nvar $8c77ecf650b6eefd$var$sectionCategoriesEl = document.querySelector(\".section-categories\");\nvar $8c77ecf650b6eefd$var$sectionBooksEl = document.querySelector(\".section-books\");\nvar $8c77ecf650b6eefd$var$sectionBooksTitleEl = document.querySelector(\".section-books-title\");\nvar $8c77ecf650b6eefd$var$booksListEl = document.querySelector(\".section-books-list\");\nfunction $8c77ecf650b6eefd$export$c2ff2758ce23ccbb(books, e) {\n    var oneBook = (0, $a9593882249300d7$export$c522a0db91e5ddc6)(e);\n    var markup = books.map(function(param) {\n        var book_image = param.book_image, title = param.title, author = param.author, _id = param._id;\n        return '<li class=\"'.concat(oneBook, \"\\\">\\n    <a class='book-item' data-value=\\\"\").concat(_id, \"\\\">\\n      <div class='thumb'>\\n        <img src='\").concat(book_image, \"' alt='Book cover' loading=\\\"lazy\\\"/>\\n        <div class='overlay'>\\n          <p class='overlay-text'>quick view </p>\\n        </div>\\n      </div>\\n      <h3 class='book-title'>\").concat(title, \"</h3>\\n      <p class='book-author'>\").concat(author, \"</p>\\n    </a>\\n  </li>\");\n    }).join(\"\\n\");\n    return markup;\n}\nfunction $8c77ecf650b6eefd$var$makeMarkupForTitle(title) {\n    var arrFromTitle = title.split(\" \");\n    if (arrFromTitle.length < 2) return \"\".concat(title);\n    var lastWord = arrFromTitle.pop();\n    return \"\".concat(arrFromTitle.join(\" \"), ' <span class=\"accent\">').concat(lastWord, \"</span>\");\n}\nfunction $8c77ecf650b6eefd$export$e3a458789c8a5044(category) {\n    return $8c77ecf650b6eefd$var$_renderBooksByCategory.apply(this, arguments);\n}\nfunction $8c77ecf650b6eefd$var$_renderBooksByCategory() {\n    $8c77ecf650b6eefd$var$_renderBooksByCategory = (0, $i7mVp._)(function(category) {\n        var res, err;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    _state.trys.push([\n                        0,\n                        2,\n                        ,\n                        3\n                    ]);\n                    return [\n                        4,\n                        $8c77ecf650b6eefd$var$booksApi.getBooksByCategory(category)\n                    ];\n                case 1:\n                    res = _state.sent();\n                    $8c77ecf650b6eefd$var$booksListEl.innerHTML = $8c77ecf650b6eefd$export$c2ff2758ce23ccbb(res, true);\n                    $8c77ecf650b6eefd$var$sectionBooksTitleEl.innerHTML = $8c77ecf650b6eefd$var$makeMarkupForTitle(category);\n                    $8c77ecf650b6eefd$var$hideElement($8c77ecf650b6eefd$var$sectionCategoriesEl);\n                    $8c77ecf650b6eefd$var$showElement($8c77ecf650b6eefd$var$sectionBooksEl);\n                    $8c77ecf650b6eefd$var$booksListEl.addEventListener(\"click\", $8c77ecf650b6eefd$export$2e63ecab0dc5da99);\n                    return [\n                        3,\n                        3\n                    ];\n                case 2:\n                    err = _state.sent();\n                    console.log(err);\n                    return [\n                        3,\n                        3\n                    ];\n                case 3:\n                    return [\n                        2\n                    ];\n            }\n        });\n    });\n    return $8c77ecf650b6eefd$var$_renderBooksByCategory.apply(this, arguments);\n}\nfunction $8c77ecf650b6eefd$export$2e63ecab0dc5da99(evt) {\n    var bookItem = evt.target.closest(\".book-item\");\n    if (!bookItem) return;\n    var bookId = bookItem.getAttribute(\"data-value\");\n    $8c77ecf650b6eefd$var$booksApi.getBookById(bookId).then((0, $9v0r1.insertModalBook)).catch(function(error) {\n        return console.log(error);\n    });\n    (0, $9v0r1.onModalOpen)();\n}\nfunction $8c77ecf650b6eefd$var$hideElement(elem) {\n    elem.classList.add(\"hidden\");\n}\nfunction $8c77ecf650b6eefd$var$showElement(elem) {\n    elem.classList.remove(\"hidden\");\n}\n\n\n\nvar $i7mVp = parcelRequire(\"i7mVp\");\n\nvar $aYXpI = parcelRequire(\"aYXpI\");\n\nvar $4tSb9 = parcelRequire(\"4tSb9\");\n\nvar $eJu0s = parcelRequire(\"eJu0s\");\n\n\nvar $aYXpI = parcelRequire(\"aYXpI\");\n\nvar $eJu0s = parcelRequire(\"eJu0s\");\n\nvar $96183871d4a7368c$var$booksApi = (0, $eJu0s.useBooksApi)();\nvar $96183871d4a7368c$var$handleOnPress = function(e) {\n    $96183871d4a7368c$var$booksApi.getCategoryList().then(function(res) {\n        $96183871d4a7368c$var$parseCategoryList(res);\n    }).catch(function(err) {\n        console.log(err);\n    }).finally(function() {});\n};\nvar $96183871d4a7368c$var$categoryListEl = document.querySelector(\".category-list\");\nvar $96183871d4a7368c$var$parseCategoryList = function(list) {\n    var uniqueCategories = (0, $aYXpI._)(new Set(list.map(function(param) {\n        var list_name = param.list_name;\n        return list_name;\n    }))).sort();\n    var categoryList = uniqueCategories.map(function(category) {\n        if (category !== null && category !== undefined) return '\\n      <li class=\"category-item list\">\\n      <a class=\"category-link link\" href=\"#\">'.concat(category, \"</a>\\n      </li>\");\n    }).join(\"\");\n    $96183871d4a7368c$var$categoryListEl.insertAdjacentHTML(\"beforeend\", categoryList);\n    var activeCategory = $96183871d4a7368c$var$categoryListEl.querySelector(\".link-all\");\n    activeCategory.classList.add(\"active\");\n};\n$96183871d4a7368c$var$handleOnPress();\n$96183871d4a7368c$var$categoryListEl.addEventListener(\"click\", $96183871d4a7368c$var$getBookFromCategory);\nfunction $96183871d4a7368c$var$getBookFromCategory(e) {\n    e.preventDefault();\n    var targetCategory = e.target.closest(\".category-link\");\n    if (!targetCategory) return;\n    var linkAllRef = document.querySelector(\".link-all\");\n    var text = targetCategory.textContent.trim();\n    $96183871d4a7368c$export$281d5932efad96db();\n    if (text === \"All categories\") {\n        var sectionCategoriesRef = document.querySelector(\".section-categories\");\n        var sectionBooksRef = document.querySelector(\".section-books\");\n        sectionBooksRef.classList.add(\"hidden\");\n        sectionCategoriesRef.classList.remove(\"hidden\");\n        linkAllRef.classList.add(\"active\");\n    } else {\n        var activeCategory = e.target;\n        activeCategory.classList.add(\"active\");\n        (0, $8c77ecf650b6eefd$export$e3a458789c8a5044)(text);\n    }\n}\nfunction $96183871d4a7368c$export$281d5932efad96db() {\n    var allCategories = document.querySelectorAll(\".category-link\");\n    allCategories.forEach(function(element) {\n        if (element.classList.contains(\"active\")) element.classList.remove(\"active\");\n    });\n}\n\n\nvar $6e85cf682c3d13e1$var$booksApi = (0, $eJu0s.useBooksApi)();\nvar $6e85cf682c3d13e1$var$sectionCategoriesListEl = document.querySelector(\".section-categories-list\");\nfunction $6e85cf682c3d13e1$var$makeMarkupForCategories(categories) {\n    var categoriesMarkup = categories.map(function(list_name) {\n        return \"<li class='category-block' data-category=\\\"\".concat(list_name, \"\\\">\\n      <h3 class='category-block-title'>\").concat(list_name, \"</h3>\\n      <ul class='books-list' data-category=\\\"\").concat(list_name, \"\\\"></ul>\\n      <button type='button' class='btn' >See more</button>\\n      </li>\");\n    }).join(\"\\n\");\n    return categoriesMarkup;\n}\nfunction $6e85cf682c3d13e1$export$575704ffafa2b714() {\n    return $6e85cf682c3d13e1$var$_parceCategoriesBlocks.apply(this, arguments);\n}\nfunction $6e85cf682c3d13e1$var$_parceCategoriesBlocks() {\n    $6e85cf682c3d13e1$var$_parceCategoriesBlocks = (0, $i7mVp._)(function() {\n        var categories, uniqueCategories, blocksForRenderingBooks, topBooks, err;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    _state.trys.push([\n                        0,\n                        3,\n                        ,\n                        4\n                    ]);\n                    return [\n                        4,\n                        $6e85cf682c3d13e1$var$booksApi.getCategoryList()\n                    ];\n                case 1:\n                    categories = _state.sent();\n                    uniqueCategories = (0, $aYXpI._)(new Set(categories.map(function(param) {\n                        var list_name = param.list_name;\n                        return list_name;\n                    }))).sort();\n                    $6e85cf682c3d13e1$var$sectionCategoriesListEl.innerHTML = $6e85cf682c3d13e1$var$makeMarkupForCategories(uniqueCategories);\n                    blocksForRenderingBooks = $6e85cf682c3d13e1$var$sectionCategoriesListEl.querySelectorAll(\".books-list\");\n                    return [\n                        4,\n                        $6e85cf682c3d13e1$var$booksApi.getTopBooks()\n                    ];\n                case 2:\n                    topBooks = _state.sent();\n                    blocksForRenderingBooks.forEach(function(block) {\n                        var categoryName = block.dataset.category;\n                        var topBooksOfCategory = topBooks.find(function(elem) {\n                            return elem.list_name === categoryName;\n                        }).books;\n                        block.innerHTML = (0, $8c77ecf650b6eefd$export$c2ff2758ce23ccbb)(topBooksOfCategory);\n                    });\n                    $6e85cf682c3d13e1$var$sectionCategoriesListEl.addEventListener(\"click\", (0, $8c77ecf650b6eefd$export$2e63ecab0dc5da99));\n                    $6e85cf682c3d13e1$var$sectionCategoriesListEl.addEventListener(\"click\", $6e85cf682c3d13e1$var$onButtonClick);\n                    return [\n                        3,\n                        4\n                    ];\n                case 3:\n                    err = _state.sent();\n                    console.log(err);\n                    return [\n                        3,\n                        4\n                    ];\n                case 4:\n                    return [\n                        2\n                    ];\n            }\n        });\n    });\n    return $6e85cf682c3d13e1$var$_parceCategoriesBlocks.apply(this, arguments);\n}\nfunction $6e85cf682c3d13e1$var$onButtonClick(evt) {\n    evt.preventDefault();\n    if (evt.target.nodeName === \"BUTTON\") {\n        var category = evt.target.closest(\".category-block\").getAttribute(\"data-category\");\n        (0, $8c77ecf650b6eefd$export$e3a458789c8a5044)(category);\n        (0, $96183871d4a7368c$export$281d5932efad96db)();\n        var allCategories = Array.from(document.querySelectorAll(\".category-link.link\"));\n        var activeCategoryEl = allCategories.find(function(elem) {\n            return elem.textContent === category;\n        });\n        activeCategoryEl.classList.add(\"active\");\n        return;\n    }\n}\n$6e85cf682c3d13e1$export$575704ffafa2b714();\n\n\n\n\nparcelRequire(\"bJk49\");\nparcelRequire(\"xpKCW\");\nparcelRequire(\"aISXF\");\nparcelRequire(\"9v0r1\");\nparcelRequire(\"23Ajj\");\nvar $657d21ef6898a11f$var$currentHomePage = document.querySelector(\".header-link-home\");\n$657d21ef6898a11f$var$currentHomePage.classList.add(\"current\");\n\n\nparcelRequire(\"6GHIx\");\nparcelRequire(\"gTeoF\");\nparcelRequire(\"7hKzD\");\n\n})();\n//# sourceMappingURL=index.a4bd5606.js.map\n","// import switcher from './switcher';\nimport './js/themes';\nimport './js/menu';\nimport './js/render-books-by-category';\nimport './js/top-books';\nimport './js/condition-for-categories-render';\nimport './js/fetch-categories';\nimport './js/fireBaseFunctions.js';\nimport './js/support';\nimport './js/auth/modal-auth/eventsProcessor';\nimport './js/pop-up-book';\nimport './js/scroll-up';\nimport './js/get-current-for-home-page';\nimport './js/shopping-list-counter';\nimport './js/get-change-store-color-home';\n/* @async */\nimport './js/footer';","import { useBooksApi } from '../services/booksApi';\nimport { insertModalBook, onModalOpen } from './pop-up-book';\nimport { addClassForBookList } from './condition-for-categories-render';\n\nconst booksApi = useBooksApi();\n\nconst sectionCategoriesEl = document.querySelector('.section-categories');\nconst sectionBooksEl = document.querySelector('.section-books');\nconst sectionBooksTitleEl = document.querySelector('.section-books-title');\nconst booksListEl = document.querySelector('.section-books-list');\n\nfunction makeMarkupForBooks(books, e) {\n  let oneBook = addClassForBookList(e);\n  const markup = books\n    .map(\n      ({ book_image, title, author, _id }) => `<li class=\"${oneBook}\">\n    <a class='book-item' data-value=\"${_id}\">\n      <div class='thumb'>\n        <img src='${book_image}' alt='Book cover' loading=\"lazy\"/>\n        <div class='overlay'>\n          <p class='overlay-text'>quick view </p>\n        </div>\n      </div>\n      <h3 class='book-title'>${title}</h3>\n      <p class='book-author'>${author}</p>\n    </a>\n  </li>`\n    )\n    .join('\\n');\n  return markup;\n}\n\nfunction makeMarkupForTitle(title) {\n  const arrFromTitle = title.split(' ');\n  if (arrFromTitle.length < 2) {\n    return `${title}`;\n  }\n  const lastWord = arrFromTitle.pop();\n  return `${arrFromTitle.join(' ')} <span class=\"accent\">${lastWord}</span>`;\n}\n\nasync function renderBooksByCategory(category) {\n  try {\n    const res = await booksApi.getBooksByCategory(category);\n    booksListEl.innerHTML = makeMarkupForBooks(res, true);\n    sectionBooksTitleEl.innerHTML = makeMarkupForTitle(category);\n    hideElement(sectionCategoriesEl);\n    showElement(sectionBooksEl);\n    booksListEl.addEventListener('click', onBookSelect);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction onBookSelect(evt) {\n  const bookItem = evt.target.closest('.book-item');\n  if (!bookItem) {\n    return;\n  }\n  const bookId = bookItem.getAttribute('data-value');\n  booksApi\n    .getBookById(bookId)\n    .then(insertModalBook)\n    .catch(error => console.log(error));\n  onModalOpen();\n}\n\nfunction hideElement(elem) {\n  elem.classList.add('hidden');\n}\n\nfunction showElement(elem) {\n  elem.classList.remove('hidden');\n}\n\nexport { makeMarkupForBooks, renderBooksByCategory, onBookSelect };\n","function addClassForBookList(e) {\n  let oneBook = null;\n  if (!e) {\n    oneBook = 'element-books-list';\n  } else {\n    oneBook = 'element-books-list-all';\n  }\n  return oneBook;\n}\n\nexport { addClassForBookList };\n","import { useBooksApi } from '../services/booksApi';\nimport {\n  makeMarkupForBooks,\n  renderBooksByCategory,\n  onBookSelect,\n} from './render-books-by-category';\nimport { clearStyleCategories } from './fetch-categories';\n\nconst booksApi = useBooksApi();\n\nconst sectionCategoriesListEl = document.querySelector(\n  '.section-categories-list'\n);\n\nfunction makeMarkupForCategories(categories) {\n  const categoriesMarkup = categories\n    .map(\n      list_name => `<li class='category-block' data-category=\"${list_name}\">\n      <h3 class='category-block-title'>${list_name}</h3>\n      <ul class='books-list' data-category=\"${list_name}\"></ul>\n      <button type='button' class='btn' >See more</button>\n      </li>`\n    )\n    .join('\\n');\n  return categoriesMarkup;\n}\n\nasync function parceCategoriesBlocks() {\n  try {\n    const categories = await booksApi.getCategoryList();\n    const uniqueCategories = [\n      ...new Set(categories.map(({ list_name }) => list_name)),\n    ].sort();\n    sectionCategoriesListEl.innerHTML =\n      makeMarkupForCategories(uniqueCategories);\n    const blocksForRenderingBooks =\n      sectionCategoriesListEl.querySelectorAll('.books-list');\n    const topBooks = await booksApi.getTopBooks();\n    blocksForRenderingBooks.forEach(block => {\n      const categoryName = block.dataset.category;\n      const topBooksOfCategory = topBooks.find(\n        elem => elem.list_name === categoryName\n      ).books;\n      block.innerHTML = makeMarkupForBooks(topBooksOfCategory);\n    });\n    sectionCategoriesListEl.addEventListener('click', onBookSelect);\n    sectionCategoriesListEl.addEventListener('click', onButtonClick);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction onButtonClick(evt) {\n  evt.preventDefault();\n\n  if (evt.target.nodeName === 'BUTTON') {\n    const category = evt.target\n      .closest('.category-block')\n      .getAttribute('data-category');\n    renderBooksByCategory(category);\n    clearStyleCategories();\n    const allCategories = Array.from(\n      document.querySelectorAll('.category-link.link')\n    );\n    const activeCategoryEl = allCategories.find(\n      elem => elem.textContent === category\n    );\n    activeCategoryEl.classList.add('active');\n    return;\n  }\n}\n\nparceCategoriesBlocks();\n\nexport { parceCategoriesBlocks };\n","import { useBooksApi } from '../services/booksApi';\nimport { renderBooksByCategory } from './render-books-by-category';\n\nconst booksApi = useBooksApi();\n\nconst handleOnPress = e => {\n  booksApi\n    .getCategoryList()\n    .then(res => {\n      parseCategoryList(res);\n    })\n    .catch(err => {\n      console.log(err);\n    })\n    .finally(() => {});\n};\nconst categoryListEl = document.querySelector('.category-list');\n\nconst parseCategoryList = list => {\n  const uniqueCategories = [\n    ...new Set(list.map(({ list_name }) => list_name)),\n  ].sort();\n  const categoryList = uniqueCategories\n    .map(category => {\n      if (category !== null && category !== undefined) {\n        return `\n      <li class=\"category-item list\">\n      <a class=\"category-link link\" href=\"#\">${category}</a>\n      </li>`;\n      }\n    })\n    .join('');\n  categoryListEl.insertAdjacentHTML('beforeend', categoryList);\n  let activeCategory = categoryListEl.querySelector('.link-all');\n  activeCategory.classList.add('active');\n};\n\nhandleOnPress();\n\ncategoryListEl.addEventListener('click', getBookFromCategory);\n\nfunction getBookFromCategory(e) {\n  e.preventDefault();\n  const targetCategory = e.target.closest('.category-link');\n  if (!targetCategory) {\n    return;\n  }\n  const linkAllRef = document.querySelector('.link-all');\n  const text = targetCategory.textContent.trim();\n  clearStyleCategories();\n  if (text === 'All categories') {\n    const sectionCategoriesRef = document.querySelector('.section-categories');\n    const sectionBooksRef = document.querySelector('.section-books');\n    sectionBooksRef.classList.add('hidden');\n    sectionCategoriesRef.classList.remove('hidden');\n    linkAllRef.classList.add('active');\n  } else {\n    let activeCategory = e.target;\n    activeCategory.classList.add('active');\n    renderBooksByCategory(text);\n  }\n}\n\nfunction clearStyleCategories() {\n  const allCategories = document.querySelectorAll('.category-link');\n  allCategories.forEach(function (element) {\n    if (element.classList.contains('active')) {\n      element.classList.remove('active');\n    }\n  });\n}\n\nexport { clearStyleCategories };\n","const currentHomePage = document.querySelector('.header-link-home');\n\ncurrentHomePage.classList.add('current');"],"names":["$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$i7mVp","$4tSb9","$eJu0s","$9v0r1","$8c77ecf650b6eefd$var$booksApi","useBooksApi","$8c77ecf650b6eefd$var$sectionCategoriesEl","document","querySelector","$8c77ecf650b6eefd$var$sectionBooksEl","$8c77ecf650b6eefd$var$sectionBooksTitleEl","$8c77ecf650b6eefd$var$booksListEl","$8c77ecf650b6eefd$export$c2ff2758ce23ccbb","books","e","oneBook","map","param","book_image","title","author","_id","concat","join","$8c77ecf650b6eefd$export$e3a458789c8a5044","category","$8c77ecf650b6eefd$var$_renderBooksByCategory","apply","arguments","_","res","__generator","_state","label","trys","push","getBooksByCategory","sent","innerHTML","$8c77ecf650b6eefd$var$makeMarkupForTitle","arrFromTitle","split","length","lastWord","pop","$8c77ecf650b6eefd$var$hideElement","elem","classList","add","$8c77ecf650b6eefd$var$showElement","remove","addEventListener","$8c77ecf650b6eefd$export$2e63ecab0dc5da99","console","log","evt","bookItem","target","closest","bookId","getAttribute","getBookById","then","insertModalBook","catch","error","onModalOpen","$aYXpI","$96183871d4a7368c$var$booksApi","$96183871d4a7368c$var$categoryListEl","$96183871d4a7368c$var$parseCategoryList","list","categoryList","uniqueCategories","Set","list_name","sort","insertAdjacentHTML","activeCategory","$96183871d4a7368c$export$281d5932efad96db","allCategories","querySelectorAll","forEach","element","contains","getCategoryList","finally","preventDefault","targetCategory","linkAllRef","text","textContent","trim","sectionCategoriesRef","sectionBooksRef","$6e85cf682c3d13e1$var$booksApi","$6e85cf682c3d13e1$var$sectionCategoriesListEl","$6e85cf682c3d13e1$var$_parceCategoriesBlocks","categories","blocksForRenderingBooks","topBooks","getTopBooks","block","categoryName","dataset","topBooksOfCategory","find","$6e85cf682c3d13e1$var$onButtonClick","nodeName","activeCategoryEl","Array","from","$6e85cf682c3d13e1$export$575704ffafa2b714","$657d21ef6898a11f$var$currentHomePage"],"version":3,"file":"index.a4bd5606.js.map"}